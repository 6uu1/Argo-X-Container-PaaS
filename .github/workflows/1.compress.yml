name: "1.Compress files"

on:
  workflow_dispatch:
  push:
    branches:
      - main

  
permissions:
  contents: write
jobs:
  Building:
      runs-on: ubuntu-latest
      name: "Compress files "
      steps:
      - name: Compress files
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git clone https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/${{github.repository}}.git
          cd $(echo ${{github.repository}} | awk -F'/' '{print $2}')
          tar czvf file.tar.gz web.js entrypoint.sh package.json server.js
          git add .
          git commit -m "Upload Via Github Actions, $(date "+%Y/%m/%d")"
          git remote set-url origin https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/${{github.repository}}.git
          git push